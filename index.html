<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Doffa or deffa</title>
</head>

<body>
	<h2>Welcome to Doffa</h2>
	<p id="auth1"></p>
	<a
		href="https://www.fitbit.com/oauth2/authorize?response_type=token&client_id=22BQ88&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Findex.html&scope=weight&expires_in=604800">Sign
		in on Fitbit</a>
</body>
<script>
	if (window.location.hash) {
		var paramStr = window.location.hash.substring(1); // substring removes the initial "#"
		var paramArray = paramStr.split(/&|=/) //Split string into array on prelimiter '&' and '='
		var paramMap = paramArray.reduce(function (result, value, index, array) { //Array to map
			// Even index-elements will be keys and the following will be the value
			if (index % 2 === 0)
				result[array[index]] = array[index+1]
			return result;
		}, {});
		document.getElementById("auth1").innerHTML = paramMap.access_token
	} else {
		document.getElementById("auth").innerHTML = "You need to sign in";
	}
</script>

</html>